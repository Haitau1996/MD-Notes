# Computer Organization and Design: the Hardware/Software Interface
<font size=4> [David A. Patterson](https://www2.eecs.berkeley.edu/Faculty/Homepages/patterson.html) and [John L. Hennessy ](https://web.stanford.edu/~hennessy/) </font>

## Chap 1: 计算机抽象和技术
### Introduction
#### 传统的计算机分类和应用
PCs: 对单用户在低价区间提供良好的性能, 通常运行第三方软件.<br>
服务器: 执行大负载任务, 一般要求更强的**可靠性**.<br>
嵌入式计算机:目标是运行单一应用程序或者一组相关的应用程序, 一般对于故障的容忍度低.<br>

### 计算机体系结构中的八大伟大思想
#### Design for Moore's Law
计算机设计者面临的一个永恒的问题就是摩尔定律驱动的快速变化, 他们必须预测其完成时候的工艺水平,而不是用设计开始时候的.

#### 使用抽象简化设计
提高软件硬件生产能力的一个major technique 就是使用抽象来表示不同的设计层次, 在高的层次上只能看到底层低的简化模型, 而细节被隐藏起来了.

#### 加速common 的事件
加速大概率事件意味着你需要知道大概率事件是什么, 这需要仔细的实验和测量评估.

#### 通过并行提高性能
从计算机诞生开始, 计算机的设计者就通过并行执行操作来提高性能. 

#### 通过流水线提高性能
在计算机体系结构中一个特别的并行场景就是流水线.

#### 通过预测来提高性能
执行错误的恢复代价不高而且预测相对准确的时候, 可以用猜测的方式提前开始某些操作.

#### 存储器层次
程序员想要更快/更大/更便宜的内存, 设计师们发现通过存储器的层次结构来解决这些相互矛盾的需求.

#### 通过冗余提高可靠性
任何一个人物理器件都可能失效, 因此可以使用冗余部件的方式来提高系统的可靠性.**冗余部分可以替代失效部分并且帮助检测错误.**

### 程序的背后
系统软接位于应用软件和硬件之间, 两种系统软件对于现代计算机来说是必须的: 
* **操作系统** 是用户程序和硬件之间的接口, 为用户提供各种服务和监控功能.
    1. 处理基本的输入输出操作
    2. 分配storage and memory
    3. 为多个应用程序同时提供受保护的共享的计算机资源服务
* **编译器** 将高级语言翻译成计算机所能识别的机器语言程序.

#### 从高级语言到硬件语言
计算机服从于我们的指令(instruction,能被计算机识别并执行的位串，可以将其视为数).<br>
后来程序员发明了一种被称为汇编器(assembler)的软件, 将symbolic版本的程序(汇编语言写成)翻译成binary版本, 如`add A,B` 被翻译成`1000110010100000`,而机器可以理解的二进制语言是机器语言. 汇编语言的程序效率依旧比较低下, 后来人们创造了高级程序设计语言.<br>
![](figure/1.1.png)<br>
高级程序设计语言的使用带来了很多好处, 包括
* 用更像自然语言的方式思考, 同时可以为特定的应用设计语言
* 提高了程序生产效率

### Under the Covers
任何一个计算机的基础硬件目标都是完成相同的基本功能: **输入数据、输出数据 处理数据 和 存储数据**.于是计算机的主要部分分别为input, output, memory,datapath(也叫运算器), and control.<br>
![](figure/1.2.png)<br>
#### 显示器
图像由像素矩阵组成，可以表示成二进制位的矩阵，称为位图 (bit map).计算机硬件采用光栅刷新缓冲区（又称为帧缓冲区）来保存位图以支持图像, 要显示的图像保存在帧缓冲区中，每个像素的二进制值以刷新频率读出到显示设备。

#### Opening the Box
处理器从逻辑上包括两个主要部件：**数据通路和控制器**．数据通路 (datapath)负责完 成算术运算 ，控制器 (control) 负责指导数据通路、存储器和 IO 设备按照程序的指令正确执行.<br>
内存(memo­ry,由动态随机访问存储器(DRAM)组成)是程序运行时的存储空间，它同时也用于保存程序运行时所使用的数据.<br>
在处理器内部有另一种存储器, 被称为**缓存(chche)**,它采用的是另一种被称为SRAM(静态随机访问存储器)的存储技术，速度更快而且不那么密集,SRAM 和 DRAM 是存储器层次中的两层。<br>
抽象层次中的一个关键接口是指令集体系结构(ISA) 一 硬件和底层软件之间的接口。

#### 数据安全
计算机中的内存是易失性存储器(volatile memory),而在存储器层次中它的下一层是非易失性存储器(nonvolatile memory, 也叫secondary memory), 在过去的计算机中它可能是磁盘,而在ipad等设备中使用非易失性半导体存储器,闪存 (flash memory).

#### 与其他计算机通信
* 局域网(local area network, LAN)：一种在一定地理区域（例如在同一栋大楼内）使用的传输数据的网络。
* 广域网(wide area network, WAN)：一种可将区域扩展到几百千米范围的网络。

### 处理器和存储器制造技术
晶体管(transistor) 仅仅是一种受电流控制的开关。 集成电路 (IC) 是由成千上万个晶体管组成的芯片, 它的制造是从硅锭(silicon crystal ingot),经切片机切成厚度不超过 0.1 英寸的晶圆 (wafer)。圆晶经过一系列化学加工过程最终产生之前所讨论的晶体管、导体和绝缘体。晶圆中或是在图样化的几十个步骤中出现一个细微的瑕疵就会使其附近的电路损坏，这些瑕疵 (defect) 使得制成一个完美的晶圆几乎是不可能的。 通过切分，可以只淘汰那些有瑕疵的芯片(chip).合格芯片要连接到 1/0 引脚上，这一过程称为封装。在封装之后，必须进行最后一次测试，因为封装过程也可能出错。最后芯片被交付给用户。

### 性能
* 响应时间：也叫执行时间 (execution time) , 是计算机完成某任务所需的总时间，包括硬盘访问 、内存访问 、 I/O 活动、操作系统开销和 CPU 执行时间等。
* 吞吐率：也叫带宽 (bandwidth), 性能的另一种度量参数，表示单位时间内完成的任务数量。

#### 性能的度量
